description: >
  Basic example of using TestDino orb to upload Playwright test reports.
  This example shows the simplest integration - uploading just the JSON report.

usage:
  version: 2.1
  orbs:
    testdino: <namespace>/testdino@1.0.0

  jobs:
    run-tests:
      docker:
        - image: mcr.microsoft.com/playwright:v1.40.0-focal
      steps:
        - checkout
        - run:
            name: Install dependencies
            command: npm ci
        - run:
            name: Run Playwright tests
            command: npx playwright test
        - testdino/upload-report:
            report_directory: "./playwright-report"
            token: TESTDINO_TOKEN

  workflows:
    test-and-upload:
      jobs:
        - run-tests
